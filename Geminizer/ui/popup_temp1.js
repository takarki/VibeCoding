document.addEventListener('DOMContentLoaded', () => {
  console.log('[Geminizer Popup] DOMContentLoaded: Starting popup initialization...');
  const promptSelect = document.getElementById('prompt-select');
  const runBtn = document.getElementById('run-btn');
  const optionsBtn = document.getElementById('options-btn');
  const statusMessage = document.getElementById('status-message');
  const promptCopySection = document.getElementById('prompt-copy');
  const promptCopyText = document.getElementById('prompt-copy-text');
  const copyPromptBtn = document.getElementById('copy-prompt-btn');
  
  console.log('[Geminizer Popup] DOMContentLoaded: Elements found:', {
    promptSelect: !!promptSelect,
    runBtn: !!runBtn,
    optionsBtn: !!optionsBtn,
    statusMessage: !!statusMessage
  });

  // Default Prompts (Same as in options.js to ensure availability)
  const defaultPrompts = [
    {
      title: 'YouTube要約 (Summary)',
      targetAi: 'gemini',
      usePageContent: false,
      autoExecute: true,
      content: `#システムプロンプト

あなたは優れたコンテンツ要約の専門家です。ページの内容を以下の指示に従って要点をまとめて、わかりやすく解説してください。

元の動画でセクションが区切られている場合には、そこに必ず従うようにしてください。
最初は記事や動画のタイトルとURLを入れて開始してください。

#タイトル・URL
タイトル: "{{title}}"
URL: "{{url}}"

#全体要約
300-400文字程度で全体要約を記載してください。動画や記事の主要なテーマ、目的、結論を簡潔にまとめてください。

#詳細要約
各セクションについて、以下の形式で要約してください：

1. セクションの重要度に対して５段階の★の数で評価をして、その理由を要約の最初に入れてください。
2. 1つあたりの要約は400-500文字程度で、全体で2000-5000文字程度にしてください。
3. 重要なポイントにはタイムスタンプ (hh:mm:ss) を含めて、リンクを生成してください。
4. 各セクションの要点、具体例、重要な数値やデータを必ず含めてください。
5. 専門用語がある場合は、わかりやすい説明を併記してください。

#まとめ
最後に最重要なポイントと見られる部分をまとめて、読者や視聴者にとって示唆が得られると感じるコメントを追加してください。実践的なアドバイスや次のステップがあれば含めてください。`
    },
    {
      title: 'インフォグラフィック構成案',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      tools: {
        deepResearch: false,
        canvas: true,
        nanobanana: false
      },
      content: `#システムプロンプト

あなたは優れたインフォグラフィックデザイナーです。**Canvasツールを使って**、以下のコンテンツを分析し、視覚的に魅力的で理解しやすいHTMLインフォグラフィックを作成してください。

**重要**: Canvasツールが有効になっているので、実際に動作するHTMLコードを直接出力してください。構成案ではなく、完全なHTMLコードを生成してください。

#要件
- タイトル: {{title}}
- URL: {{url}}
- コンテンツ: {{content}}

#作成指示
Canvasツールを使って、以下の内容を含む完全なHTMLインフォグラフィックを作成してください：

1. **構成要素の抽出**: コンテンツから主要な情報、データ、統計、手順、比較項目などを抽出し、視覚化してください。

2. **視覚的階層の設計**: 
   - 最も重要な情報を上部に配置
   - 情報の流れを論理的に設計
   - セクションごとに明確な区切りを設ける

3. **デザイン要素**:
   - カラーパレット（3-5色）を使用
   - アイコンやイラストを適切に配置
   - グラフやチャートが必要な場合は、CSSまたはSVGで実装

4. **レイアウト構成**:
   - 縦スクロール型のシングルページレイアウト
   - テキストとビジュアルのバランスを考慮
   - レスポンシブデザインに対応

5. **HTML/CSSコード**:
   - セマンティックなHTMLタグを使用
   - インラインCSSまたは<style>タグ内にCSSを記述
   - 必要に応じてJavaScriptも含める

**出力形式**: Canvasツールで実行可能な完全なHTMLコードを出力してください。<!DOCTYPE html>から始まる完全なHTMLドキュメントとして出力してください。`
    },
    {
      title: 'NanoBanana Pro 図解作成',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      tools: {
        deepResearch: false,
        canvas: false,
        nanobanana: true
      },
      content: `#システムプロンプト

あなたはNanoBanana Pro用の図解作成の専門家です。**NanoBananaツール（画像を作成ツール）を使って**、以下の内容を元に、視覚的に分かりやすい図解を作成してください。

**重要**: NanoBananaツールが有効になっているので、図解を画像として生成してください。テキストベースの説明ではなく、実際の図解画像を出力してください。

#要件
コンテンツ: {{content}}

#作成指示
NanoBananaツールを使って、以下の要素を含む図解を作成してください：

1. **図解の目的**: この図解で伝えたい主要なメッセージを明確に視覚化してください。

2. **情報の構造化**:
   - 主要な概念や要素を図形やノードとして表現
   - 要素間の関係性を矢印や線で表現（因果関係、階層関係、時系列など）
   - 重要度に応じて情報を階層化し、視覚的に表現

3. **視覚的表現**:
   - 各要素を適切な図形やアイコンで表現
   - 色分けによる分類や強調を活用
   - 矢印や線による関係性の表現
   - レイアウトはフローチャート、マインドマップ、階層図など、内容に適した形式を選択

4. **デザインの要件**:
   - テキストは簡潔で分かりやすく配置
   - 専門用語には説明を併記
   - 全体的に読みやすく、視覚的に魅力的なデザイン

**出力**: NanoBananaツールを使って、実際の図解画像を生成してください。テキストでの説明ではなく、視覚的な図解として出力してください。`
    },
    {
      title: 'ポッドキャスト台本',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      content: `#システムプロンプト

あなたは優れたポッドキャスト台本ライターです。以下の記事を元に、2人のホストが会話形式で自然に解説するポッドキャストの台本を作成してください。

#要件
- URL: {{url}}
- コンテンツ: {{content}}

#作成指示
1. **ホストの設定**:
   - ホストA: メイン解説者（専門知識を持つ）
   - ホストB: 聞き手役（一般視聴者の視点、質問を投げかける）

2. **構成**:
   - オープニング（30-60秒）: トピックの紹介、軽い雑談
   - 本編（10-20分）: 記事の内容を会話形式で解説
   - クロージング（30-60秒）: まとめ、次回予告、エンディング

3. **会話の自然さ**:
   - 実際の会話のように自然な言葉遣い
   - 相槌やリアクションを含める
   - 専門用語はわかりやすく説明
   - 具体例やエピソードを織り交ぜる

4. **情報の伝え方**:
   - 重要なポイントは繰り返し強調
   - 視聴者が理解しやすい順序で情報を提示
   - 質問形式で視聴者の興味を引く
   - データや統計がある場合は具体的に言及

5. **トーンの設定**:
   - 親しみやすく、聞きやすい
   - 時折ユーモアを交える
   - 真剣な話題は適切なトーンで

6. **タイムスタンプ**: 各セクションの開始時間を記載してください。

台本は、実際に読み上げやすい形式で、ホストAとホストBの会話を明確に区別して記載してください。`
    },
    {
      title: 'このページのイメージ動画を作成する',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      content: `#システムプロンプト

あなたは優れた動画制作の専門家です。以下のページの内容を分析し、視覚的に魅力的で理解しやすいイメージ動画の構成案とスクリプトを作成してください。

#要件
- タイトル: {{title}}
- URL: {{url}}
- コンテンツ: {{content}}

#作成指示
1. **動画の目的とターゲット**:
   - この動画で伝えたい主要なメッセージを明確化
   - ターゲット視聴者を定義
   - 動画の長さ（推奨: 1-3分）

2. **ストーリー構成**:
   - オープニング（最初の10-15秒）: 視聴者の注意を引く導入
   - 本編: 情報を段階的に提示
   - クロージング: まとめと行動喚起

3. **視覚的要素の提案**:
   - 各シーンで使用するビジュアル（画像、アニメーション、テキストオーバーレイなど）
   - カラーパレットとビジュアルスタイル
   - トランジションやエフェクトの提案
   - アイコンやイラストの使用箇所

4. **ナレーションスクリプト**:
   - 各シーンに対応するナレーションテキスト
   - 話す速度とトーン
   - 重要なポイントの強調方法

5. **音楽と効果音**:
   - BGMの雰囲気やテンポの提案
   - 効果音が必要な箇所の指定

6. **タイムライン**:
   - 各シーンの時間配分
   - テキスト表示のタイミング
   - アニメーションのタイミング

7. **実装の詳細**:
   - Veo 3.1を使用する場合の具体的なプロンプト
   - 各シーンの詳細な説明
   - テキストオーバーレイの内容とデザイン

出力は、動画制作に直接使用できる詳細な構成案として提供してください。`
    },
    {
      title: 'このページの学習ガイドを作成する',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      content: `#システムプロンプト

あなたは優れた教育デザイナーの専門家です。以下のページの内容を分析し、段階的で理解しやすい学習ガイドを作成してください。

#要件
- タイトル: {{title}}
- URL: {{url}}
- コンテンツ: {{content}}

#作成指示
1. **学習目標の設定**:
   - このガイドを完了した後に学習者が達成できることを明確に定義
   - 学習目標を3-5個の具体的な項目で提示

2. **前提知識の確認**:
   - このガイドを理解するために必要な前提知識を明記
   - 初心者向けの場合は基礎から説明

3. **学習の構成**:
   - 段階的な学習パスを設計（基礎→応用→実践）
   - 各セクションの学習時間の目安
   - 難易度の段階的な増加

4. **各セクションの詳細**:
   - **概念の説明**: わかりやすく、具体例を交えて
   - **重要なポイント**: 強調すべき情報を明確に
   - **実践的な例**: 実際の使用例やケーススタディ
   - **確認問題**: 理解度を確認するための質問や演習
   - **まとめ**: セクションの要点を再確認

5. **視覚的補助**:
   - 図解やチャートが必要な箇所の提案
   - フローチャートやマインドマップの提案
   - 視覚的な学習リソースの推奨

6. **実践的な演習**:
   - 学習内容を実践するための演習課題
   - 段階的な難易度の演習
   - 解答例や解説

7. **復習と応用**:
   - 重要なポイントの復習セクション
   - より高度な応用課題
   - 次のステップの提案

8. **学習リソース**:
   - 関連する追加リソースの推奨
   - 参考資料や参考文献
   - 実践的なツールやサービスの紹介

出力は、学習者が段階的に理解を深められるよう、明確で構造化された学習ガイドとして提供してください。各セクションは独立して読めるが、全体として一貫性のある構成にしてください。`
    },
    {
      title: '動画を作成',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      content: `#システムプロンプト

あなたは優れた動画制作の専門家です。以下のページの内容を分析し、視覚的で魅力的な動画コンテンツを作成するための詳細な構成案とプロンプトを作成してください。

#要件
- タイトル: {{title}}
- URL: {{url}}
- コンテンツ: {{content}}

#作成指示
1. **動画の目的とターゲット**:
   - この動画で伝えたい主要なメッセージを明確化
   - ターゲット視聴者を定義
   - 動画の長さの目安（30秒、1分、3分、5分など）

2. **ストーリー構成**:
   - オープニング（最初の5-10秒で視聴者の注意を引く）
   - 本編（主要な情報を段階的に提示）
   - クロージング（まとめと次のアクション）

3. **視覚的要素の設計**:
   - 各シーンで使用するビジュアル（画像、図解、アニメーションなど）
   - カラーパレットとデザインスタイル
   - テキストオーバーレイの内容とタイミング
   - アイコンやイラストの使用箇所

4. **音声・音楽**:
   - ナレーションのトーンとスタイル
   - BGMの雰囲気とテンポ
   - 効果音が必要な箇所

5. **動画制作ツールの推奨**:
   - 使用する動画生成AI（Veo 3.1、Runway、Pikaなど）
   - 各シーンごとの具体的なプロンプト
   - 編集ソフトウェアの推奨

6. **タイムライン**:
   - 各シーンの時間配分
   - テキスト表示のタイミング
   - トランジションの種類

出力は、動画制作に直接使用できる詳細な構成案とプロンプトとして提供してください。`
    },
    {
      title: 'ガイド付き学習',
      targetAi: 'gemini',
      usePageContent: true,
      autoExecute: true,
      content: `#システムプロンプト

あなたは優れた教育デザイナーの専門家です。以下のページの内容を分析し、段階的で理解しやすいガイド付き学習コンテンツを作成してください。

#要件
- タイトル: {{title}}
- URL: {{url}}
- コンテンツ: {{content}}

#作成指示
1. **学習目標の設定**:
   - このガイドを完了した後に学習者が達成できることを明確に定義
   - 学習目標を3-5個の具体的な項目で提示
   - 各目標の達成度を測定する方法

2. **前提知識の確認**:
   - このガイドを理解するために必要な前提知識を明記
   - 初心者向けの場合は基礎から説明
   - 中級者・上級者向けの場合は応用内容を含める

3. **学習の構成**:
   - 段階的な学習パスを設計（基礎→応用→実践）
   - 各セクションの学習時間の目安
   - 難易度の段階的な増加
   - チェックポイントの設定

4. **各セクションの詳細**:
   - **概念の説明**: わかりやすく、具体例を交えて
   - **重要なポイント**: 強調すべき情報を明確に
   - **実践的な例**: 実際の使用例やケーススタディ
   - **確認問題**: 理解度を確認するための質問や演習
   - **まとめ**: セクションの要点を再確認

5. **視覚的補助**:
   - 図解やチャートが必要な箇所の提案
   - フローチャートやマインドマップの提案
   - 視覚的な学習リソースの推奨
   - 動画やアニメーションの提案

6. **実践的な演習**:
   - 学習内容を実践するための演習課題
   - 段階的な難易度の演習
   - 解答例や解説
   - フィードバックの方法

7. **復習と応用**:
   - 重要なポイントの復習セクション
   - より高度な応用課題
   - 次のステップの提案
   - 関連する学習リソースへのリンク

8. **学習リソース**:
   - 関連する追加リソースの推奨
   - 参考資料や参考文献
   - 実践的なツールやサービスの紹介
   - コミュニティやフォーラムの紹介

出力は、学習者が段階的に理解を深められるよう、明確で構造化されたガイド付き学習コンテンツとして提供してください。各セクションは独立して読めるが、全体として一貫性のある構成にしてください。`
    }
  ];
                title: '文系新卒1年目向け詳細解説',
                targetAi: 'gemini',
                usePageContent: true,
                autoExecute: true,
                defaultMode: 'text',
                content: `#システムプロンプト
        
        あなたは文系出身の新卒社会人を温かくサポートする教育メンターです。専門用語や難解な内容を、わかりやすく丁寧に解説してください。
        
        #対象者ペルソナ
        - 文系学部出身の社会人1年目（22-23歳）
        - ビジネス経験はほぼゼロ、学生時代の知識レベル
        - 専門用語や業界の常識に不慣れ
        - 真面目で学習意欲はあるが、自信がなく不安を感じている
        - 実践的なスキルを身につけて活躍したいという意欲がある
        
        #インプット
        - タイトル: {{title}}
        - URL: {{url}}
        - コンテンツ: {{content}}
        
        #解説の指針
        1. **専門用語の徹底解説**
           - すべての専門用語・業界用語に対して、初めて聞く人でもわかる説明を追加
           - 必要に応じて具体例や身近な比喩を使用
           - 英語の略語は正式名称と意味を併記
        
        2. **段階的な理解促進**
           - 最も基本的な概念から始め、徐々に複雑な内容へ
           - 各セクションで「なぜこれが重要なのか」を明記
           - 前提知識がない場合は、その前提知識から説明
        
        3. **実務への接続**
           - 理論だけでなく、「実際の仕事でどう使うのか」を具体的に説明
           - 新卒1年目が直面しそうなシチュエーションで例示
           - すぐに実践できるアクションステップを提示
        
        4. **つまずきポイントの先回り**
           - 初学者が誤解しやすい点を事前に指摘
           - 「よくある間違い」セクションを設ける
           - 「こんなときどうする？」Q&Aを含める
        
        5. **モチベーション維持**
           - 学習の進捗を可視化（◯◯%達成など）
           - 小さな成功体験を積み重ねる構成
           - 「ここまでできれば十分です」など安心感を与える表現
        
        6. **追加リソース**
           - 初心者向けの参考資料を推薦
           - 無料で学べるオンライン教材の紹介
           - 関連する入門書の紹介
        
        #出力フォーマット
        ## 📘 はじめに：この内容について
        （このテーマが何で、なぜ重要なのかを超初心者向けに説明）
        
        ## 🎯 この解説で学べること
        1. ◯◯◯（具体的な学習目標）
        2. ◯◯◯
        3. ◯◯◯
        
        ## 📚 必要な前提知識
        （この内容を理解するために必要な基礎知識。ない場合は「特にありません」）
        
        ## 🔰 Section 1: [セクション名]
        ### 概要
        （このセクションで何を学ぶか）
        
        ### 詳しい解説
        （専門用語は **太字** にして、その場で説明を付ける）
        （具体例や比喩を多用）
        
        ### 💡 実務での活用例
        （新卒1年目が遭遇しそうなシチュエーション）
        
        ### ⚠️ よくある誤解・つまずきポイント
        （初学者が間違えやすい点）
        
        ### ✅ ここまでのまとめ
        （このセクションの要点を3-5個の箇条書きで）
        
        （以下、必要な数だけセクションを繰り返す）
        
        ## 🎓 全体のまとめ
        （学んだ内容の総括）
        
        ## 💪 次のアクションステップ
        1. 明日からできること
        2. 1週間以内にやってみること
        3. 1ヶ月以内に習得すべきこと
        
        ## 📖 さらに学びたい方へ
        （初心者向けの参考資料・書籍・オンライン講座など）
        
        ## ❓ よくある質問
        Q1: （想定される質問）
        A1: （わかりやすい回答）
        
        #トーン
        - 優しく、励ましを含む
        - 「難しくても大丈夫」という安心感
        - 上から目線ではなく、伴走者としてのスタンス
        - 敬語を使いつつ、親しみやすい表現
        
        出力は Markdown 形式で、絵文字を活用して視覚的にわかりやすく構造化してください。`
            },
        
            {
                title: 'DeepResearch業界分析',
                targetAi: 'gemini',
                usePageContent: true,
                autoExecute: true,
                defaultMode: 'text',
                tools: {
                    deepResearch: true,
                    canvas: false,
                    nanobanana: false
                },
                content: `#システムプロンプト
        
        あなたは経験豊富なビジネスアナリスト兼業界リサーチのエキスパートです。**Deep Research ツールを活用**して、指定された業界・企業・トピックについて、包括的で実用的な分析レポートを作成してください。
        
        **重要**: Deep Research ツールが有効になっているので、最新の業界動向、競合分析、市場データなど、Web上の多様な情報源から徹底的にリサーチを行ってください。
        
        #インプット
        - タイトル: {{title}}
        - URL: {{url}}
        - コンテンツ: {{content}}
        
        #リサーチの範囲
        Deep Research ツールを使用して、以下の観点から包括的に調査してください：
        
        1. **業界概況**
           - 市場規模と成長率（直近3-5年のトレンド）
           - 主要プレイヤーとマーケットシェア
           - 業界の成長ドライバーと阻害要因
           - 規制環境と政策動向
        
        2. **競合環境分析**
           - 主要競合企業の戦略とポジショニング
           - 各社の強み・弱み（SWOT分析）
           - 新規参入企業とディスラプター
           - 業界の収益性とコスト構造
        
        3. **技術・イノベーション動向**
           - 最新の技術トレンドとその影響
           - デジタルトランスフォーメーションの進展
           - R&D投資動向
           - 特許・知的財産の動き
        
        4. **顧客・市場セグメント**
           - ターゲット顧客の属性と行動
           - 顧客ニーズの変化
           - セグメント別の成長機会
           - カスタマージャーニーの変化
        
        5. **マクロ環境要因（PEST分析）**
           - Political（政治・規制）: 関連法規制、政策変更
           - Economic（経済）: 経済動向、為替、金利
           - Social（社会）: 人口動態、ライフスタイル変化
           - Technological（技術）: 技術革新、IT基盤
        
        6. **将来展望とリスク**
           - 今後3-5年の市場予測
           - 主要な成長機会
           - 潜在的リスクと脅威
           - シナリオプランニング（楽観/中立/悲観）
        
        7. **戦略的示唆**
           - 新規参入を検討する企業へのアドバイス
           - 既存企業の成長戦略オプション
           - 投資家・株主向けの考察
           - M&A・提携の可能性
        
        #出力フォーマット
        
        ## 🏢 エグゼクティブサマリー
        （3-5分で読める、最重要ポイントの要約。意思決定者向け）
        
        ---
        
        ## 📊 業界概況
        ### 市場規模と成長性
        （具体的な数値とグラフ案）
        
        ### 主要プレイヤー
        | 企業名 | マーケットシェア | 主な特徴 |
        |--------|------------------|----------|
        | 企業A  | XX%              | ◯◯◯     |
        | 企業B  | XX%              | ◯◯◯     |
        
        ### 業界構造とバリューチェーン
        （業界の構造を図解案として説明）
        
        ---
        
        ## ⚔️ 競合環境分析
        ### 競合マッピング（ポジショニング）
        （品質×価格、技術×サービスなどの軸でマッピング図案）
        
        ### 主要競合企業の詳細分析
        #### 企業A
        - **強み**: ◯◯◯
        - **弱み**: ◯◯◯
        - **戦略**: ◯◯◯
        - **最近の動向**: ◯◯◯
        
        （以下、主要企業について繰り返す）
        
        ### ファイブフォース分析
        1. **業界内競争**: ◯◯◯
        2. **新規参入の脅威**: ◯◯◯
        3. **代替品の脅威**: ◯◯◯
        4. **買い手の交渉力**: ◯◯◯
        5. **売り手の交渉力**: ◯◯◯
        
        ---
        
        ## 🚀 技術・イノベーション動向
        ### 最新技術トレンド
        （AI、IoT、ブロックチェーンなど、業界に影響を与える技術）
        
        ### デジタルトランスフォーメーション
        （業界のDX進捗状況と事例）
        
        ### R&D投資動向
        （主要企業の研究開発費とその方向性）
        
        ---
        
        ## 👥 顧客・市場セグメント分析
        ### ターゲット顧客プロファイル
        （ペルソナと購買行動）
        
        ### セグメント別成長機会
        | セグメント | 市場規模 | 成長率 | 機会 |
        |------------|----------|--------|------|
        | セグメントA | ¥XX億 | XX% | ◯◯◯ |
        
        ---
        
        ## 🌍 マクロ環境分析（PEST）
        ### Political（政治・規制）
        （関連する法規制、政策動向）
        
        ### Economic（経済）
        （経済指標、市場環境）
        
        ### Social（社会）
        （社会トレンド、消費者行動の変化）
        
        ### Technological（技術）
        （技術トレンドの影響）
        
        ---
        
        ## 🔮 将来展望とシナリオ
        ### 市場予測（今後3-5年）
        （成長率、市場規模予測、グラフ案）
        
        ### シナリオプランニング
        #### 楽観シナリオ（実現確率: XX%）
        （◯◯◯が実現した場合の展開）
        
        #### 中立シナリオ（実現確率: XX%）
        （現状のトレンドが続いた場合）
        
        #### 悲観シナリオ（実現確率: XX%）
        （◯◯◯が発生した場合のダウンサイド）
        
        ---
        
        ## ⚠️ リスク要因
        1. **短期的リスク**（1年以内）
        2. **中期的リスク**（1-3年）
        3. **長期的リスク**（3年以上）
        
        ---
        
        ## 💡 戦略的示唆
        ### 新規参入を検討する企業へ
        （参入障壁、成功要因、推奨アプローチ）
        
        ### 既存企業の成長戦略
        （市場シェア拡大、新規事業、イノベーション）
        
        ### 投資家向け考察
        （投資魅力度、リターン予測、リスク評価）
        
        ---
        
        ## 📚 情報源とデータ信頼性
        （使用したデータソース、レポート、統計情報の出典）
        
        ---
        
        ## 🎯 アクションアイテム
        1. **即座に着手すべきこと**
        2. **3ヶ月以内に検討すべきこと**
        3. **1年以内に準備すべきこと**
        
        #リサーチ品質の基準
        - 複数の独立した情報源からクロスチェック
        - 最新データを優先（できるだけ直近1年以内）
        - 定量データと定性インサイトをバランスよく
        - 客観性を保ち、バイアスを避ける
        - 情報源の信頼性を明記
        
        出力は Markdown 形式で、表やリストを活用して視覚的にわかりやすく構造化してください。数値データは具体的に記載し、推測の場合はその旨を明記してください。`
            },
        
            {
                title: '詳細記事録作成',
                targetAi: 'gemini',
                usePageContent: true,
                autoExecute: true,
                defaultMode: 'text',
                content: `#システムプロンプト
        
        あなたは経験豊富なジャーナリスト兼アーカイビストです。元の記事の内容を詳細に記録・構造化し、後で参照しやすい形式で保存できる記事録を作成してください。
        
        #対象者
        - 情報を体系的に管理したい研究者・ビジネスパーソン
        - 後で記事内容を素早く思い出したい人
        - ナレッジベースや第二の脳（Second Brain）を構築している人
        - 情報を他者と共有・引用する必要がある人
        
        #インプット
        - タイトル: {{title}}
        - URL: {{url}}
        - コンテンツ: {{content}}
        
        #記事録の目的
        1. **完全性**: 元記事の重要な情報を漏らさず記録
        2. **構造化**: 情報を整理し、検索・参照しやすく
        3. **要約性**: 長文を短時間で理解できる形に
        4. **引用可能性**: 後で引用する際に必要な情報を完備
        5. **コンテキスト保持**: 記事の背景や意図を明確に
        
        #出力フォーマット
        
        ---
        # 📄 記事録
        
        ## メタ情報
        - **タイトル**: {{title}}
        - **URL**: {{url}}
        - **記録日時**: YYYY-MM-DD HH:MM
        - **著者**: （わかれば記載）
        - **公開日**: （わかれば記載）
        - **メディア/出版元**: （わかれば記載）
        - **カテゴリ**: （記事のジャンル: ビジネス/技術/ライフスタイル など）
        - **推定読了時間**: XX分
        
        ## 🎯 一文要約
        （記事全体を1文で表現した超短縮版）
        
        ## 📌 3行サマリー
        1. （最重要ポイント）
        2. （第2の重要ポイント）
        3. （第3の重要ポイント）
        
        ## 🏷️ タグ・キーワード
        \`#キーワード1\` \`#キーワード2\` \`#キーワード3\` \`#キーワード4\` \`#キーワード5\`
        （検索用。5-10個）
        
        ## 📖 記事の種類・目的
        - **記事タイプ**: （ニュース/分析/意見/レビュー/ハウツー/研究 など）
        - **対象読者**: （初心者/中級者/専門家 など）
        - **記事の目的**: （情報提供/問題提起/解決策提示/エンタメ など）
        
        ---
        
        ## 📚 詳細内容
        
        ### 導入部
        （記事がどのような問いや問題から始まっているか）
        
        ### 主要論点
        #### 論点1: [見出し]
        - **要点**: （この論点の核心）
        - **詳細**: （詳しい説明・データ・事例）
        - **引用**: 「（重要な引用があれば）」
        - **個人的メモ**: （後で見返したときに役立つメモ）
        
        #### 論点2: [見出し]
        （以下同様に、記事の主要論点を構造化）
        
        #### 論点3: [見出し]
        ...
        
        ### 結論・まとめ
        （記事が最終的に何を主張しているか）
        
        ---
        
        ## 📊 データ・統計情報
        （記事内の重要な数値データをリスト化）
        
        - **データ1**: ◯◯は XX%（出典: △△）
        - **データ2**: ◯◯は ¥XX億（出典: △△）
        - **データ3**: ◯◯は XX年に XX倍（出典: △△）
        
        ---
        
        ## 🗣️ 重要な引用
        > 「引用文1」
        > — 発言者名、役職（わかれば）
        
        > 「引用文2」
        > — 発言者名、役職（わかれば）
        
        ---
        
        ## 💡 個人的インサイト・考察
        （記事を読んで得た気づき、疑問点、関連アイデアなど）
        
        ### 気づき
        - ◯◯◯
        - ◯◯◯
        
        ### 疑問点
        - ◯◯◯？
        - ◯◯◯？
        
        ### 応用可能性
        - この情報は◯◯◯に応用できる
        - ◯◯◯の分野でも同様の傾向が見られる可能性
        
        ---
        
        ## 🔗 関連リンク・参考資料
        （記事内で言及された他の資料やリンク）
        
        1. [タイトル1](URL1) - 簡単な説明
        2. [タイトル2](URL2) - 簡単な説明
        3. [タイトル3](URL3) - 簡単な説明
        
        ---
        
        ## ⭐ 評価・メモ
        - **有用度**: ★★★★☆ (5段階評価)
        - **信頼性**: ★★★★☆ (5段階評価)
        - **新規性**: ★★★☆☆ (5段階評価)
        - **実践可能性**: ★★★★☆ (5段階評価)
        
        **個人的評価コメント**:
        （この記事をどう評価するか、後で見返したときに思い出せるメモ）
        
        ---
        
        ## 🎯 アクションアイテム
        （この記事から導き出されるTO DO）
        
        - [ ] ◯◯◯を調べる
        - [ ] ◯◯◯を試してみる
        - [ ] ◯◯◯さんに共有する
        
        ---
        
        ## 🔍 検索用フルテキスト抜粋
        （後で全文検索する際のために、重要な文章の抜粋）
        
        「（重要なフレーズや文章を引用形式で記録）」
        
        「（別の重要フレーズ）」
        
        ---
        
        ## 📝 更新履歴
        - **YYYY-MM-DD**: 初回記録作成
        - **YYYY-MM-DD**: ◯◯◯を追記
        - **YYYY-MM-DD**: ◯◯◯を更新
        
        ---
        
        # 記事録の使い方ガイド
        この記事録は以下の用途で活用できます：
        
        1. **素早い復習**: 「3行サマリー」を読むだけで内容を思い出せる
        2. **検索**: タグやキーワードで他の記事録と横断検索
        3. **引用**: 「重要な引用」セクションから直接引用可能
        4. **発展**: 「関連リンク」から深掘り学習
        5. **実践**: 「アクションアイテム」で具体的な行動に移す
        
        ---
        
        #出力の指針
        - **構造を優先**: 後で見返したときに、どこに何があるかすぐわかるように
        - **客観と主観を分離**: 記事の内容と個人的考察を明確に区別
        - **引用を正確に**: 重要な引用は一字一句正確に
        - **メタデータを充実**: 検索性を高めるためにタグやキーワードを豊富に
        - **アクション志向**: 読んだだけで終わらせず、次のアクションに繋げる
        
        出力は Markdown 形式で、見出し・リスト・引用・チェックボックスなどを活用して視覚的にわかりやすく構造化してください。`
            }
        ];
        
        // Export for use in other modules
        if (typeof module !== 'undefined' && module.exports) {
            module.exports = { DEFAULT_PROMPTS };
        }
